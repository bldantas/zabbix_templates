# QUADStor >= 3.0.75.1

UserParameter=quadstorvirt.discovery, sudo /quadstor/bin/vdconfig -l | tail -n+2 | perl -ne '@arr = split(/\s+/, $_); $hash{$arr[1]}{$arr[4]}=$arr[0]; END{ print "{\n\t\"data\":[\n"; $last1 = keys %hash; foreach $k1 (keys %hash){ $last2 = keys %{ $hash{$k1} }; foreach $k2 (keys %{ $hash{$k1} }){ print "\t\t{\n\t\t\t\"{#VDISKNAME}\":\"$hash{$k1}{$k2}\",\n\t\t\t\"{#VDISKID}\":\"$k2\",\n\t\t\t\"{#POOL}\":\"$k1\"\n\t\t\}"; if( 0 <-- $last2 || 0 <-- $last1 ){print ",\n"} else {print "\n"} }; }; print "\t]\n}\n"; }'

UserParameter=quadstorvirt.write_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.write_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.read_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Read Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.read_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Read Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.data_deduped[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Data Deduped:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.dedupe_ratio[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Dedupe Ratio:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.data_unmapped[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Data Unmapped:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.unmap_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Unmap Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.blocks_zeroed[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Blocks Zeroed:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.uncompressed_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Uncompressed Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.compressed_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Compressed Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.compression_hits[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Compression Hits:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.compression_misses[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Compression Misses:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.verify_hits[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Verify Hits:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.verify_misses[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Verify Misses:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.verify_errors[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Verify Errors:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.cw_hits[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*CW Hits:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.cw_misses[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*CW Misses:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.xcopy_write[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*XCopy Write:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.xcopy_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*XCopy Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.write_same_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Same Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.write_same_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Same Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.populate_token_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Populate Token Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.populate_token_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Populate Token Ops:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.write_token_size[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Token Size:' | cut -f2 -d':' | cut -f2 -d' '
UserParameter=quadstorvirt.write_token_ops[*],sudo /quadstor/bin/vdconfig -l -v $1 | egrep '^\s*Write Token Ops:' | cut -f2 -d':' | cut -f2 -d' '